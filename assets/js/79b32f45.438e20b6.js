"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[935],{9476:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>d,frontMatter:()=>r,metadata:()=>a,toc:()=>c});var n=s(5893),i=s(1151);const r={title:"M3 \xb7 Analyze Test Spec"},o=void 0,a={id:"run-test",title:"M3 \xb7 Analyze Test Spec",description:"In the previous section, we did quick tests to validate our development environment, sample application, and Playwright setup. In this section, we dive deeper into concepts like the Playwright Test Specification, Configuration, Reporting and Commandline for running tests.",source:"@site/docs/03-run-test.md",sourceDirName:".",slug:"/run-test",permalink:"/playwright-workshop-101/docs/run-test",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:3,frontMatter:{title:"M3 \xb7 Analyze Test Spec"},sidebar:"mainSidebar",previous:{title:"M2 \xb7 Validate Setup",permalink:"/playwright-workshop-101/docs/setup"},next:{title:"M4 \xb7 Use VS Code",permalink:"/playwright-workshop-101/docs/use-vscode"}},l={},c=[{value:"Step 1: Run Example Test Spec",id:"step-1-run-example-test-spec",level:2},{value:"Step 2: View Test Report",id:"step-2-view-test-report",level:2},{value:"Step 3: Understand TestConfig",id:"step-3-understand-testconfig",level:2},{value:"3.1 Configure Projects",id:"31-configure-projects",level:3},{value:"3.2 Explore Emulation",id:"32-explore-emulation",level:3},{value:"3.3 Explore <code>use</code> Options",id:"33-explore-use-options",level:3},{value:"Step 4: Understand Test Spec",id:"step-4-understand-test-spec",level:2},{value:"4.1 Reset To Default Config",id:"41-reset-to-default-config",level:3},{value:"4.2 View Example Specification",id:"42-view-example-specification",level:3},{value:"4.3 Understand Test Hierarchy",id:"43-understand-test-hierarchy",level:3},{value:"4.4 Understand Test Structure",id:"44-understand-test-structure",level:3},{value:"4.5 Understand Test Components",id:"45-understand-test-components",level:3}];function h(e){const t=Object.assign({p:"p",em:"em",h2:"h2",code:"code",pre:"pre",ul:"ul",li:"li",img:"img",a:"a",h3:"h3",ol:"ol",strong:"strong"},(0,i.ah)(),e.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(t.p,{children:["In the previous section, we did quick tests to validate our development environment, sample application, and Playwright setup. In this section, we dive deeper into concepts like the Playwright Test ",(0,n.jsx)(t.em,{children:"Specification"}),", ",(0,n.jsx)(t.em,{children:"Configuration"}),", ",(0,n.jsx)(t.em,{children:"Reporting"})," and ",(0,n.jsx)(t.em,{children:"Commandline"})," for running tests."]}),"\n",(0,n.jsx)(t.p,{children:"Let's get started."}),"\n",(0,n.jsx)(t.h2,{id:"step-1-run-example-test-spec",children:"Step 1: Run Example Test Spec"}),"\n",(0,n.jsxs)(t.p,{children:["Recall that we reset our ",(0,n.jsx)(t.code,{children:"testDir"})," to point to the ",(0,n.jsx)(t.code,{children:"tests/"})," directory. That means the Playwright Test runner will only find specifications within the ",(0,n.jsx)(t.code,{children:"tests/*"})," sub-tree. Right now that contains a single file - ",(0,n.jsx)(t.code,{children:"example.spec.ts"})," - which is provided by default when you initialize a new Playwright project."]}),"\n",(0,n.jsx)(t.p,{children:"Let's run the test."}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-bash",children:"npx playwright test\n"})}),"\n",(0,n.jsxs)(t.p,{children:["We get the following output - indicating that all tests passed. But what does ",(0,n.jsx)(t.code,{children:"6 tests"})," and ",(0,n.jsx)(t.code,{children:"3 workers"})," mean given we only had one test specification?"]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-bash",children:"Running 6 tests using 3 workers\n  6 passed (8.2s)\n\nTo open last HTML report run:\n  npx playwright show-report\n"})}),"\n",(0,n.jsx)(t.h2,{id:"step-2-view-test-report",children:"Step 2: View Test Report"}),"\n",(0,n.jsx)(t.p,{children:"Let's see if the HTML report gives us any more information."}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-bash",children:"npx playwright show-report\n"})}),"\n",(0,n.jsx)(t.p,{children:"Note that again, GitHub Codespaces forwards the port for the report server so you can view it on the browser in your host machine."}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-bash",children:"Serving HTML report at http://localhost:9323. Press Ctrl+C to quit.\n"})}),"\n",(0,n.jsx)(t.p,{children:"Opening the browser to that URL shows us a report with these insights:"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:'We have 2 test cases ("has title", "get started link")'}),"\n",(0,n.jsx)(t.li,{children:"We ran each across 3 browser engines (chromium, firefox, webkit)"}),"\n",(0,n.jsxs)(t.li,{children:["The test cases were defined in the ",(0,n.jsx)(t.code,{children:"example.spec.ts"})," file"]}),"\n",(0,n.jsxs)(t.li,{children:["The test run tool ",(0,n.jsx)(t.em,{children:"9.8s"})," with all 6 tests passing (none skipped)"]}),"\n"]}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"Playwright Example Spec Report Main",src:s(3874).Z+"",width:"2046",height:"1004"})}),"\n",(0,n.jsx)(t.p,{children:"Clicking on a particular row gives you the detailed run of that test case:"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:"This test case was run on Chromium"}),"\n",(0,n.jsxs)(t.li,{children:['The "Before Hooks" ran first. This set ',(0,n.jsx)(t.em,{children:"context"})," (fixtures) for test isolation."]}),"\n",(0,n.jsxs)(t.li,{children:['The Test "Action" ran next. This resulted in a ',(0,n.jsx)(t.em,{children:"navigation"})," to a specific page."]}),"\n",(0,n.jsxs)(t.li,{children:['The Test "Assertion" executes. This ',(0,n.jsx)(t.em,{children:"validates"})," that page has a specific title."]}),"\n",(0,n.jsxs)(t.li,{children:['The "After Hooks" run last. They take any context ',(0,n.jsx)(t.em,{children:"cleanup"})," actions needed."]}),"\n",(0,n.jsxs)(t.li,{children:['This test case took "894 ms" to complete - with ',(0,n.jsx)(t.em,{children:"navigation"})," taking most time."]}),"\n"]}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"Playwright Example Spec Report Detail",src:s(2499).Z+"",width:"2096",height:"1582"})}),"\n",(0,n.jsxs)(t.p,{children:["This answers our question on what the ",(0,n.jsx)(t.code,{children:"6 tests"})," were. But what does ",(0,n.jsx)(t.code,{children:"3 workers"})," mean? And where did we define these configuration parameters and test specification actions?"]}),"\n",(0,n.jsxs)(t.p,{children:["By default Playwright runs tests in parallel. To do this it uses workers. The number of workers is determined by the number of CPU cores available. Playwright will use half of the available CPU cores. You can override this by setting the ",(0,n.jsx)(t.code,{children:"workers"})," property in the ",(0,n.jsx)(t.a,{href:"https://playwright.dev/docs/test-configuration",children:"Playwright Configuration"})," file."]}),"\n",(0,n.jsx)(t.h2,{id:"step-3-understand-testconfig",children:"Step 3: Understand TestConfig"}),"\n",(0,n.jsxs)(t.p,{children:["Let's start by learning about Playwright Test ",(0,n.jsx)(t.em,{children:"configuration"}),"."]}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:["The ",(0,n.jsx)(t.a,{href:"https://playwright.dev/docs/test-configuration#basic-configuration",children:(0,n.jsx)(t.code,{children:"playwright.config.ts"})})," file defines the default Test Runner configuration."]}),"\n",(0,n.jsxs)(t.li,{children:["The ",(0,n.jsx)(t.a,{href:"https://playwright.dev/docs/api/class-testconfig",children:"TestConfig"})," API describes the available configuration properties for customization."]}),"\n",(0,n.jsxs)(t.li,{children:["The ",(0,n.jsx)(t.a,{href:"https://playwright.dev/docs/test-cli",children:"Playwright Test CLI"})," lets you override config properties or file location at runtime."]}),"\n"]}),"\n",(0,n.jsxs)(t.p,{children:["Let's see what the default configuration file provided by Playwright (on first setup) looks like. The ",(0,n.jsx)(t.code,{children:"playwright.config.ts"})," snippet below was simplified for clarity."]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-js",children:"import { defineConfig, devices } from '@playwright/test';\n\nexport default defineConfig({\n\n  testDir: './tests',\n  fullyParallel: true,\n  forbidOnly: !!process.env.CI,\n  retries: process.env.CI ? 2 : 0,\n  workers: process.env.CI ? 1 : undefined,\n  reporter: 'html',\n\n  use: {\n    trace: 'on-first-retry',\n  },\n\n  projects: [\n    {\n      name: 'chromium',\n      use: { ...devices['Desktop Chrome'] },\n    },\n\n    {\n      name: 'firefox',\n      use: { ...devices['Desktop Firefox'] },\n    },\n\n    {\n      name: 'webkit',\n      use: { ...devices['Desktop Safari'] },\n    },\n  ],\n\n  /* Run your local dev server before starting the tests */\n  // webServer: {\n  //   command: 'npm run start',\n  //   url: 'http://127.0.0.1:3000',\n  //   reuseExistingServer: !process.env.CI,\n  // },\n});\n"})}),"\n",(0,n.jsxs)(t.p,{children:["We can refer to the ",(0,n.jsx)(t.a,{href:"https://playwright.dev/docs/test-configuration#basic-configuration",children:"Basic Configuration"})," documentation to understand what this does:"]}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.a,{href:"https://playwright.dev/docs/api/class-testconfig#test-config-test-dir",children:(0,n.jsx)(t.code,{children:"testDir"})})," = top-level directory to scan recursively for test files."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.a,{href:"https://playwright.dev/docs/api/class-testconfig#test-config-fully-parallel",children:(0,n.jsx)(t.code,{children:"fullyParallel"})})," = decide if all tests in all files should run in parallel"]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.a,{href:"https://playwright.dev/docs/api/class-testconfig#test-config-forbid-only",children:(0,n.jsx)(t.code,{children:"forbidOnly"})})," = exit with error if ",(0,n.jsx)(t.code,{children:"test.only"})," is used (e.g., useful on CI)"]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.a,{href:"https://playwright.dev/docs/api/class-testconfig#test-config-retries",children:(0,n.jsx)(t.code,{children:"retries"})})," = max #retries per test (useful for ",(0,n.jsx)(t.em,{children:"web-first assertions"}),")"]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.a,{href:"https://playwright.dev/docs/api/class-testconfig#test-config-workers",children:(0,n.jsx)(t.code,{children:"workers"})})," = max # of concurrent worker processes (for parallelizing tests)"]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.a,{href:"https://playwright.dev/docs/api/class-testconfig#test-config-reporter",children:(0,n.jsx)(t.code,{children:"reporter"})})," = select from available reporter options ( built-in and custom)"]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.a,{href:"https://playwright.dev/docs/api/class-testconfig#test-config-use",children:(0,n.jsx)(t.code,{children:"use"})})," = set ",(0,n.jsx)(t.em,{children:(0,n.jsx)(t.a,{href:"https://playwright.dev/docs/test-use-options",children:"global options"})})," for all tests (can be ",(0,n.jsx)(t.a,{href:"https://playwright.dev/docs/test-use-options#configuration-scopes",children:"overriden"})," at project or test scope)"]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.a,{href:"https://playwright.dev/docs/api/class-testconfig#test-config-projects",children:(0,n.jsx)(t.code,{children:"projects"})})," = run tests in ",(0,n.jsx)(t.em,{children:"multiple configurations"})," (think browsers, emulators, options)"]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.a,{href:"https://playwright.dev/docs/api/class-testconfig#test-config-web-server",children:(0,n.jsx)(t.code,{children:"webServer"})})," = launch webserver(s) hosting app(s) to test (waits till ready to start)"]}),"\n"]}),"\n",(0,n.jsxs)(t.p,{children:["We'll revisit the ",(0,n.jsx)(t.em,{children:"webServer"})," option in a future exercise when we build the sample application test suite. For now, let's try modifying one or more of these properties to see how this works."]}),"\n",(0,n.jsx)(t.h3,{id:"31-configure-projects",children:"3.1 Configure Projects"}),"\n",(0,n.jsxs)(t.p,{children:["First, update the ",(0,n.jsx)(t.code,{children:"projects"})," object in the configuration file to comment out or remove the other browser options, leaving just one as shown:"]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-bash",children:"\n  projects: [\n    {\n      name: 'chromium',\n      use: { ...devices['Desktop Chrome'] },\n    },\n  ],\n"})}),"\n",(0,n.jsx)(t.p,{children:"Run the test - excellent!"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-bash",children:"npx playwright test\n"})}),"\n",(0,n.jsx)(t.p,{children:"We can see that we now have the 2 test cases running on a single browser project, giving us 2 test executions."}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-bash",children:"Running 2 tests using 2 workers\n  2 passed (1.9s)\n"})}),"\n",(0,n.jsx)(t.h3,{id:"32-explore-emulation",children:"3.2 Explore Emulation"}),"\n",(0,n.jsxs)(t.p,{children:["Playwright supports ",(0,n.jsx)(t.a,{href:"https://playwright.dev/docs/emulation",children:"Emulation"})," for mobile testing - select a device profile from the ",(0,n.jsx)(t.a,{href:"https://github.com/microsoft/playwright/blob/main/packages/playwright-core/src/server/deviceDescriptorsSource.json",children:"supported emulation profiles"})," and add it as a new project in the configuration file."]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-bash",children:"\n  projects: [\n    {\n      name: 'chromium',\n      use: { ...devices['Desktop Chrome'] },\n    },\n    {\n      name: 'iPhone 12 Pro',\n      use: { ...devices['iPhone 12 Pro'] },\n    },\n  ],\n"})}),"\n",(0,n.jsxs)(t.p,{children:["I chose the ",(0,n.jsx)(t.code,{children:"iPhone 12 Pro"}),". Here is that ",(0,n.jsx)(t.a,{href:"https://github.com/microsoft/playwright/blob/main/packages/playwright-core/src/server/deviceDescriptorsSource.json",children:"that profile description"})," looks like:"]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-json",children:'  "iPhone 12 Pro": {\n    "userAgent": "Mozilla/5.0 (iPhone; CPU iPhone OS 14_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/17.0 Mobile/15E148 Safari/604.1",\n    "screen": {\n      "width": 390,\n      "height": 844\n    },\n    "viewport": {\n      "width": 390,\n      "height": 664\n    },\n    "deviceScaleFactor": 3,\n    "isMobile": true,\n    "hasTouch": true,\n    "defaultBrowserType": "webkit"\n  },\n'})}),"\n",(0,n.jsx)(t.p,{children:"Let's run the test again."}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-bash",children:"npx playwright test\n"})}),"\n",(0,n.jsxs)(t.p,{children:["This will run our two tests on both the ",(0,n.jsx)(t.code,{children:"chromium"})," and ",(0,n.jsx)(t.code,{children:"iPhone 12 Pro"})," projects. We can see that we now have 4 test executions."]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-bash",children:"Running 4 tests using 3 workers\n  4 passed (4.5s)\n"})}),"\n",(0,n.jsx)(t.p,{children:"This time, lets open the report to see what happened."}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-bash",children:"npx playwright show-report\n"})}),"\n",(0,n.jsx)(t.p,{children:"This will serve the report on a local server - and open the browser to that URL."}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-bash",children:"Serving HTML report at http://localhost:9323. Press Ctrl+C to quit.\n"})}),"\n",(0,n.jsxs)(t.p,{children:["Note how the same 2 test cases are executed, now with the ",(0,n.jsx)(t.code,{children:"chromium"})," browser and the ",(0,n.jsx)(t.code,{children:"iPhone 12 Pro"})," device emulator. We can see that the emulator takes a little longer to run each test compared to the browser engines."]}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"Emulated Test",src:s(9324).Z+"",width:"2086",height:"754"})}),"\n",(0,n.jsxs)(t.p,{children:["We can ",(0,n.jsx)(t.a,{href:"https://playwright.dev/docs/emulation",children:"override the default profile properties"})," via the Playwright configuration file (global) or within a Test Specification file (local override) - but to try that out, we first need to understand the ",(0,n.jsx)(t.code,{children:"use"})," directive."]}),"\n",(0,n.jsxs)(t.h3,{id:"33-explore-use-options",children:["3.3 Explore ",(0,n.jsx)(t.code,{children:"use"})," Options"]}),"\n",(0,n.jsxs)(t.p,{children:["Playwright has a ",(0,n.jsxs)(t.a,{href:"https://playwright.dev/docs/test-use-options",children:[(0,n.jsx)(t.code,{children:"use"})," property"]})," to configure Test Runner for the following features:"]}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.a,{href:"https://playwright.dev/docs/test-use-options#basic-options",children:"Basic"})," - set ",(0,n.jsx)(t.code,{children:"baseURL"}),' (maps to "/" route) and ',(0,n.jsx)(t.code,{children:"storageState"})," (e.g., load auth)."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.a,{href:"https://playwright.dev/docs/test-use-options#emulation-options",children:"Emulation"})," - a real device e.g., mobile or tablet"]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.a,{href:"https://playwright.dev/docs/test-use-options#network-options",children:"Network"})," - configure connections e.g., provide credentials for HTTP auth"]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.a,{href:"https://playwright.dev/docs/test-use-options#recording-options",children:"Recording"})," - capture traces, screenshots or video to help debug"]}),"\n"]}),"\n",(0,n.jsxs)(t.p,{children:["These options can be set at the ",(0,n.jsx)(t.a,{href:"https://playwright.dev/docs/api/class-browser",children:"Browser"})," level (for all tests on that browser) or the ",(0,n.jsx)(t.a,{href:"https://playwright.dev/docs/api/class-browsercontext",children:"BrowserContext"})," level (for tests on a specific ",(0,n.jsx)(t.code,{children:"page"})," session in Browser)."]}),"\n",(0,n.jsxs)(t.p,{children:["Let's try to ",(0,n.jsx)(t.code,{children:"use"})," the Recording feature to turn on traces and take a screenshot for our projects. This should let us get a ",(0,n.jsx)(t.em,{children:"visual"})," and ",(0,n.jsx)(t.em,{children:"system"})," level understanding of what happens in test execution. Update the ",(0,n.jsx)(t.em,{children:"top-level"})," ",(0,n.jsx)(t.code,{children:"use"})," object in your ",(0,n.jsx)(t.code,{children:"playwright.config.ts"})," as follows:"]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-js",children:"export default defineConfig({\n  testDir: './tests',\n  ..\n\n  use: {\n    trace: 'on',\n    screenshot: 'on',\n    video: 'on'\n  },\n  ..\n});\n"})}),"\n",(0,n.jsx)(t.p,{children:"Let's run the test again."}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-bash",children:"npx playwright test\n"})}),"\n",(0,n.jsxs)(t.p,{children:["Note how the total time taken has increased drastically (from ~4s to 7s). Turning on traces and recording media are ",(0,n.jsx)(t.em,{children:"time-intensive"})," actions and should be used with discretion - typically to help debug issues."]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-bash",children:"Running 4 tests using 3 workers\n  4 passed (7.2s)\n"})}),"\n",(0,n.jsx)(t.p,{children:"Lets open the HTML report to see what happened."}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-bash",children:"npx playwright show-report\n"})}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-bash",children:"Serving HTML report at http://localhost:9323. Press Ctrl+C to quit.\n"})}),"\n",(0,n.jsxs)(t.p,{children:["Here's what the new report tells us about the power of ",(0,n.jsx)(t.code,{children:"use"}),":"]}),"\n",(0,n.jsxs)(t.ol,{children:["\n",(0,n.jsxs)(t.li,{children:["Turning on options like recording are expensive (see increase in execution times) so use with discretion - e.g., for debugging.\n",(0,n.jsx)(t.img,{src:s(4520).Z+"",width:"2094",height:"784"})]}),"\n",(0,n.jsxs)(t.li,{children:["Let's take a look at the detail for a browser project.\n",(0,n.jsx)(t.img,{src:s(3203).Z+"",width:"2068",height:"940"})]}),"\n",(0,n.jsxs)(t.li,{children:["This time, the detail view includes a screenshot (from ",(0,n.jsx)(t.code,{children:"page.goto"}),").\n",(0,n.jsx)(t.img,{src:s(7058).Z+"",width:"2042",height:"1214"})]}),"\n",(0,n.jsxs)(t.li,{children:['And we get a video (think "visual walkthrough" of test case).\n',(0,n.jsx)(t.img,{src:s(2781).Z+"",width:"2080",height:"1244"})]}),"\n",(0,n.jsxs)(t.li,{children:["And most importantly, we get a detailed trace view (think debugging!).\n",(0,n.jsx)(t.img,{src:s(6514).Z+"",width:"2714",height:"1684"})]}),"\n",(0,n.jsxs)(t.li,{children:["The detail page for the mobile project reflects the emulated profile view\n",(0,n.jsx)(t.img,{src:s(4656).Z+"",width:"1036",height:"1482"})]}),"\n",(0,n.jsxs)(t.li,{children:['And we can use the "video walkthrough" to manually responsiveness etc.\n',(0,n.jsx)(t.img,{src:s(2570).Z+"",width:"576",height:"868"})]}),"\n"]}),"\n",(0,n.jsxs)(t.p,{children:["We covered a lot here, and need to move on. But as a challenge to yourself - try out some of the other ",(0,n.jsx)(t.code,{children:"use"})," options and run tests to see how execution and reporting change. For example - try ",(0,n.jsx)(t.a,{href:"https://playwright.dev/docs/test-use-options#emulation-options",children:"emulating"})," a ",(0,n.jsx)(t.code,{children:"dark"})," color scheme or changing the ",(0,n.jsx)(t.code,{children:"viewport"})," to override the device profile defaults."]}),"\n",(0,n.jsx)(t.p,{children:"\ud83d\ude80 | You learned a lot about Test Configuration. Now let's explore Test Specification."}),"\n",(0,n.jsx)(t.h2,{id:"step-4-understand-test-spec",children:"Step 4: Understand Test Spec"}),"\n",(0,n.jsx)(t.h3,{id:"41-reset-to-default-config",children:"4.1 Reset To Default Config"}),"\n",(0,n.jsxs)(t.p,{children:["\ud83d\uded1 | Before we continue - note that we made a lot of changes to the ",(0,n.jsx)(t.code,{children:"playwright.config.ts"})," file in the previous section. Let's reverse it and get back to our default configuration state."]}),"\n",(0,n.jsxs)(t.p,{children:["The easiest way is to ",(0,n.jsx)(t.em,{children:"copy back"})," the original file as follows."]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-bash",children:"cp tests-examples/orig-playwright.config.ts playwright.config.ts\n"})}),"\n",(0,n.jsx)(t.p,{children:"Run a quick test to make sure that worked."}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-bash",children:"npx playwright test\n"})}),"\n",(0,n.jsx)(t.p,{children:"You should see that all 6 tests pass."}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-bash",children:"Running 6 tests using 3 workers\n  6 passed (8.0s)\n"})}),"\n",(0,n.jsx)(t.p,{children:"Excellent - we are now ready to talk about Test Specifications!"}),"\n",(0,n.jsx)(t.h3,{id:"42-view-example-specification",children:"4.2 View Example Specification"}),"\n",(0,n.jsxs)(t.p,{children:["The default test runs on the ",(0,n.jsx)(t.code,{children:"tests/example.spec.ts"})," specification. Let's unpack that to see what it contains:"]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-js",children:"import { test, expect } from '@playwright/test';\n\ntest('has title', async ({ page }) => {\n  await page.goto('https://playwright.dev/');\n\n  // Expect a title \"to contain\" a substring.\n  await expect(page).toHaveTitle(/Playwright/);\n});\n\ntest('get started link', async ({ page }) => {\n  await page.goto('https://playwright.dev/');\n\n  // Click the get started link.\n  await page.getByRole('link', { name: 'Get started' }).click();\n\n  // Expects page to have a heading with the name of Installation.\n  await expect(page.getByRole('heading', { name: 'Installation' })).toBeVisible();\n});\n"})}),"\n",(0,n.jsxs)(t.p,{children:["If you've done ",(0,n.jsx)(t.em,{children:"test-driven development"})," or ",(0,n.jsx)(t.em,{children:"end-to-end testing"}),", the structure and format of the tests should be familiar. But you may see a few new concepts too. Before we dive into those, let's talk about test structure."]}),"\n",(0,n.jsx)(t.h3,{id:"43-understand-test-hierarchy",children:"4.3 Understand Test Hierarchy"}),"\n",(0,n.jsx)(t.p,{children:"Here is how we organize our tests in Playwright."}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:["Every ",(0,n.jsx)(t.code,{children:"test()"})," method in that specification is a ",(0,n.jsx)(t.a,{href:"https://playwright.dev/docs/api/class-testcase",children:"Test Case"}),". When run in a configuration with multiple projects, each project will ",(0,n.jsx)(t.em,{children:"instantiate"})," a version of this Test Case and configure it to suit project requirements."]}),"\n",(0,n.jsx)(t.li,{children:"Every executable statement within the Test Case is a test action that can be tracked in reporter, trace-viewer, or UI mode tooling flows."}),"\n",(0,n.jsxs)(t.li,{children:["Test cases can be ",(0,n.jsx)(t.em,{children:"grouped explicitly"})," into ",(0,n.jsx)(t.a,{href:"https://playwright.dev/docs/api/class-suite",children:"Test Suites"})," using ",(0,n.jsx)(t.code,{children:"test.describe()"})," function. You can see an example of this in our ",(0,n.jsx)(t.code,{children:"test-examples/demo-todo-app-spec.ts"}),". We'll revisit this later."]}),"\n",(0,n.jsxs)(t.li,{children:["Test cases are ",(0,n.jsx)(t.em,{children:"grouped implicitly"})," into Suites based on the project they belong to, and the file they are contained in. This allows Playwright to target groups of tests in various ways for execution."]}),"\n",(0,n.jsxs)(t.li,{children:["Every test run has a ",(0,n.jsx)(t.em,{children:"Root suite"}),", with a child ",(0,n.jsx)(t.em,{children:"Project suite"})," for each configured project. Project suites have child ",(0,n.jsx)(t.em,{children:"File suites"})," for each test specification identified for that run. The File suite can have ",(0,n.jsx)(t.em,{children:"Test Case"})," objects (individual) and ",(0,n.jsx)(t.em,{children:"Test Suite"})," objects(explicitly grouped using ",(0,n.jsx)(t.code,{children:"describe"}),") as children."]}),"\n"]}),"\n",(0,n.jsxs)(t.p,{children:["The ",(0,n.jsx)(t.code,{children:"test.describe"})," directive is an example of a ",(0,n.jsx)(t.a,{href:"https://playwright.dev/docs/test-annotations#group-tests",children:"Playwright Annotation"}),". It allows us to group Test Case objects logically in a file so we can do things like apply ",(0,n.jsx)(t.em,{children:"beforeEach"})," and ",(0,n.jsx)(t.em,{children:"afterEach"}),"  hooks to all tests within a group. See the snippet from ",(0,n.jsx)(t.code,{children:"test-examples/demo-todo-app.spec.ts"})," below for reference."]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-js",children:"test.describe('Mark all as completed', () => {\n  test.beforeEach(async ({ page }) => {\n    await createDefaultTodos(page);\n    await checkNumberOfTodosInLocalStorage(page, 3);\n  });\n\n  test.afterEach(async ({ page }) => {\n    await checkNumberOfTodosInLocalStorage(page, 3);\n  });\n\n  test('should allow me to mark all items as completed', async ({ page }) => {\n    // test actions details omitted for clarity\n  });\n\n  test('should allow me to clear the complete state of all items', async ({ page }) => {\n    // test actions details omitted for clarity\n  });\n\n  test('complete all checkbox should update state when items are completed / cleared', async ({ page }) => {\n    // test actions details omitted for clarity\n  });\n});\n"})}),"\n",(0,n.jsx)(t.h3,{id:"44-understand-test-structure",children:"4.4 Understand Test Structure"}),"\n",(0,n.jsxs)(t.p,{children:["We can look at either of the two Test Specification snippets above (the first from ",(0,n.jsx)(t.code,{children:"example.spec.ts"}),", the second from ",(0,n.jsx)(t.code,{children:"demo-todo-app.spec.ts"}),") for this discussion - but let's use the second one since it has a bit more detail that is relevant."]}),"\n",(0,n.jsxs)(t.p,{children:["Playwright tests generally follow the ",(0,n.jsx)(t.a,{href:"https://automationpanda.com/2020/07/07/arrange-act-assert-a-pattern-for-writing-good-tests/",children:"Arrange-Act-Assert"})," pattern:"]}),"\n",(0,n.jsxs)(t.ol,{children:["\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Arrange"})," - sets up the environment for the test. This can include providing the right fixtures, but also running ",(0,n.jsx)(t.code,{children:"beforeEach"}),"/",(0,n.jsx)(t.code,{children:"beforeAll"})," hooks that set up the initial state for that test."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Act"})," - these are the steps within the test that ",(0,n.jsx)(t.em,{children:"locate"})," the right elements to interact with, and then take ",(0,n.jsx)(t.em,{children:"actions"})," on them. For instance, the test may ",(0,n.jsx)(t.a,{href:"https://playwright.dev/docs/api/class-locator#locator-get-by-role",children:"locate a button"})," and then ",(0,n.jsx)(t.a,{href:"https://playwright.dev/docs/writing-tests#basic-actions",children:"click it"}),". Other actions include ",(0,n.jsx)(t.em,{children:"check/uncheck"})," (checkboxes), ",(0,n.jsx)(t.em,{children:"fill"})," (forms), ",(0,n.jsx)(t.em,{children:"hover"})," (mouseover), ",(0,n.jsx)(t.em,{children:"focus"})," (on element), ",(0,n.jsx)(t.em,{children:"press"})," (single key) etc."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Assert"})," - these statements validate expected outcomes from the actions. Playwright supports ",(0,n.jsx)(t.a,{href:"https://playwright.dev/docs/test-assertions",children:"web-first assertions"})," where ",(0,n.jsx)(t.a,{href:"https://playwright.dev/docs/api/class-genericassertions",children:"generic assertions"})," (using ",(0,n.jsx)(t.code,{children:"expect"}),") can be coupled with ",(0,n.jsx)(t.a,{href:"https://playwright.dev/docs/api/class-locatorassertions",children:"async matchers"}),"(for the ",(0,n.jsx)(t.code,{children:"Locator"}),") to make sure that the target element is ready before evaluating the asserted condition."]}),"\n"]}),"\n",(0,n.jsx)(t.p,{children:"Once you understand this, it becomes easier to understand, author, and refine, your test specifications using Playwright tooling."}),"\n",(0,n.jsx)(t.h3,{id:"45-understand-test-components",children:"4.5 Understand Test Components"}),"\n",(0,n.jsx)(t.p,{children:"Let's see these concepts in action by reviewing the example spec from section 4.2."}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-js",children:"import { test, expect } from '@playwright/test';\n\ntest('has title', async ({ page }) => {\n  await page.goto('https://playwright.dev/');\n\n  // Expect a title \"to contain\" a substring.\n  await expect(page).toHaveTitle(/Playwright/);\n});\n\ntest('get started link', async ({ page }) => {\n  await page.goto('https://playwright.dev/');\n\n  // Click the get started link.\n  await page.getByRole('link', { name: 'Get started' }).click();\n\n  // Expects page to have a heading with the name of Installation.\n  await expect(page.getByRole('heading', { name: 'Installation' })).toBeVisible();\n});\n"})}),"\n",(0,n.jsxs)(t.ol,{children:["\n",(0,n.jsxs)(t.li,{children:["(Arrange) - there are no explicit hooks in this test spec, but we'll talk about how ",(0,n.jsx)(t.code,{children:"page"})," is a ",(0,n.jsx)(t.a,{href:"https://playwright.dev/docs/test-fixtures#built-in-fixtures",children:"Fixture"})," that also supports this goal."]}),"\n",(0,n.jsxs)(t.li,{children:["(Act) - the ",(0,n.jsx)(t.code,{children:"page.goto"})," is an example of a ",(0,n.jsx)(t.a,{href:"https://playwright.dev/docs/writing-tests#navigation",children:"Navigation"})," action where the browser automates the user action of navigating to that URL."]}),"\n",(0,n.jsxs)(t.li,{children:["(Assert) - the ",(0,n.jsx)(t.code,{children:"expect.(<locator>).toBeVisible()"})," is an example of a ",(0,n.jsx)(t.a,{href:"https://playwright.dev/docs/api/class-locatorassertions#locator-assertions-to-be-visible",children:"LocatorAssertion"})," where Playwright will wait for the located element to be ready (using retries) before evaluating the assertion (is it visible?)."]}),"\n"]}),"\n",(0,n.jsx)(t.p,{children:"With this simple example, you know three powerful concepts in Playwright Testing:"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.a,{href:"https://playwright.dev/docs/test-fixtures",children:"Fixtures"})," - for establishing environment and ",(0,n.jsx)(t.em,{children:"test isolation"}),"."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.a,{href:"https://playwright.dev/docs/locators",children:"Locators"})," - for finding elements with ",(0,n.jsx)(t.em,{children:"auto-wait and auto-retry"}),"."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.a,{href:"https://playwright.dev/docs/test-assertions",children:"Assertions"})," - for validating outcomes of automated actions ",(0,n.jsx)(t.em,{children:"web-assertions"}),"."]}),"\n"]}),"\n",(0,n.jsxs)(t.p,{children:["Take a few minutes to familiarize yourself with the documentation for those three features and APIs - and you should be all set to dive into ",(0,n.jsx)(t.em,{children:"designing and authoring"})," an end-to-end specification for the sample application."]}),"\n",(0,n.jsx)(t.p,{children:"\ud83d\ude80 | Excellent! Now let's talk about the core Developer Tools for Playwright!"})]})}const d=function(e={}){const{wrapper:t}=Object.assign({},(0,i.ah)(),e.components);return t?(0,n.jsx)(t,Object.assign({},e,{children:(0,n.jsx)(h,e)})):h(e)}},9324:(e,t,s)=>{s.d(t,{Z:()=>n});const n=s.p+"assets/images/03-run-emulator-6d25bb30d50c5d2a0dbae5dc6d7b78eb.png"},2499:(e,t,s)=>{s.d(t,{Z:()=>n});const n=s.p+"assets/images/03-run-report-detail-fc1226cc1de396784499c52baddd5d74.png"},3874:(e,t,s)=>{s.d(t,{Z:()=>n});const n=s.p+"assets/images/03-run-report-main-491362a6da34d2265c1c3afcdf0801a9.png"},3203:(e,t,s)=>{s.d(t,{Z:()=>n});const n=s.p+"assets/images/03-run-use-report-detail-a00232f53a4e5f98da2b38b2fa0393f8.png"},4656:(e,t,s)=>{s.d(t,{Z:()=>n});const n=s.p+"assets/images/03-run-use-report-screenshot-mobile-74d18a55874bf250811174ed2b52ba62.png"},7058:(e,t,s)=>{s.d(t,{Z:()=>n});const n=s.p+"assets/images/03-run-use-report-screenshot-db98f37f01622f7ca6bc81b3c198a91e.png"},6514:(e,t,s)=>{s.d(t,{Z:()=>n});const n=s.p+"assets/images/03-run-use-report-trace-70bd4cc895cf9f63ce5b1d0adf7303b8.png"},2570:(e,t,s)=>{s.d(t,{Z:()=>n});const n=s.p+"assets/images/03-run-use-report-video-mobile-94bc922a7ee41110dca740788eebfef0.png"},2781:(e,t,s)=>{s.d(t,{Z:()=>n});const n=s.p+"assets/images/03-run-use-report-video-232740a481c953e82953e6f4c0429071.png"},4520:(e,t,s)=>{s.d(t,{Z:()=>n});const n=s.p+"assets/images/03-run-use-report-360e1949d14ebf7a3d57ebea383e08e0.png"},1151:(e,t,s)=>{s.d(t,{Zo:()=>a,ah:()=>r});var n=s(7294);const i=n.createContext({});function r(e){const t=n.useContext(i);return n.useMemo((()=>"function"==typeof e?e(t):{...t,...e}),[t,e])}const o={};function a({components:e,children:t,disableParentContext:s}){let a;return a=s?"function"==typeof e?e({}):e||o:r(e),n.createElement(i.Provider,{value:a},t)}}}]);